<!DOCTYPE html>
<html>
<head>
  <title>What Grove Is Your Juice Made With? | Kennesaw</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px;
      background: #f5f5f5;
      display: flex;
      justify-content: center;
    }

    .container {
      background: white;
      padding: 40px;
      border-radius: 10px;
      width: 420px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      text-align: center;
    }

    img {
      width: 180px;
      margin-bottom: 20px;
    }

    h1 {
      margin-bottom: 10px;
    }

    p {
      font-size: 14px;
      color: #666;
      margin-bottom: 25px;
    }

    select, input, button {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      font-size: 16px;
    }

    button {
      background-color: #f26522;
      color: white;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }

    button:hover {
      background-color: #d9531e;
    }

    #results {
      margin-top: 20px;
      text-align: left;
      font-size: 14px;
    }

    .result-box {
      background: #fafafa;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 10px;
      border-left: 4px solid #f26522;
    }
  </style>
</head>
<body>

<div class="container">

  <!-- Replace the src below with your actual logo file -->
  <img src="kennesaw-logo.png" alt="Kennesaw Logo">

  <h1>What Grove Is Your Juice Made With?</h1>
  <p>Enter the code on your bottle to discover the Florida grove behind your juice.</p>

  <select id="productSelect">
    <option>Loading products...</option>
  </select>

  <input type="text" id="code" placeholder="Example: L1T5 2/22/26">

  <button onclick="trace()">Find Groves Now</button>

  <div id="results"></div>

</div>

<script>
const API = "https://juice-trace-app-production.up.railway.app";

async function loadProducts() {
  const response = await fetch(API + "/products");
  const products = await response.json();

  const select = document.getElementById("productSelect");
  select.innerHTML = "";

  products.forEach(p => {
    const option = document.createElement("option");
    option.value = p.name;
    option.textContent = p.name;
    select.appendChild(option);
  });
}

async function trace() {
  const product = document.getElementById("productSelect").value;
  const code = document.getElementById("code").value;

  const response = await fetch(
    API + "/trace?product=" +
    encodeURIComponent(product) +
    "&code=" +
    encodeURIComponent(code)
  );

  const data = await response.json();
  const resultsDiv = document.getElementById("results");

  if (!data || data.length === 0) {
    resultsDiv.innerHTML = "<p>No sourcing information found for this code.</p>";
    return;
  }

  let html = "<h3>Your Juice Was Made With Fruit From:</h3>";

  data.forEach(item => {
    html += `
      <div class="result-box">
        <strong>Type of Fruit:</strong> ${item.ingredient}<br>
        <strong>Grove Name:</strong> ${item.supplier_lot}<br>
        <strong>Grove Location:</strong> ${item.grove_location}
      </div>
    `;
  });

  resultsDiv.innerHTML = html;
}

loadProducts();
</script>

</body>
</html>
